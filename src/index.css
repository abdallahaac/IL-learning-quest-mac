/* Tailwind */
@import "tailwindcss";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Footer + scroll safety vars (defaults; JS updates at runtime) */
:root {
	--footer-h: 88px; /* default only */
	--mobile-footer-gap: 0px; /* default only */
	--footer-clearance: calc(var(--footer-h) + 104px);
}

/* Focus jumps stop above the footer */
*:focus {
	scroll-margin-bottom: var(--footer-clearance);
}

/* Core sizing */
html,
body,
#root {
	height: 100%;
}
body {
	overflow: hidden;
} /* only the inner scrollport scrolls */
* {
	min-height: 0;
	min-width: 0;
}

/* MOBILE-ONLY padding for the main scroll container */
.has-mobile-footer-gap {
	padding-bottom: 0;
	scroll-padding-bottom: 0;
}
@media (max-width: 640px) {
	.has-mobile-footer-gap {
		padding-bottom: calc(
			var(--footer-h, 88px) + env(safe-area-inset-bottom, 0px) +
				var(--mobile-footer-gap, 0px)
		);
		scroll-padding-bottom: calc(
			var(--footer-h, 88px) + env(safe-area-inset-bottom, 0px) +
				var(--mobile-footer-gap, 0px)
		);
	}
	/* physical spacer at the end of the content, mobile-only */
	.mobile-gap-spacer {
		height: calc(
			var(--footer-h, 88px) + env(safe-area-inset-bottom, 0px) +
				var(--mobile-footer-gap, 0px)
		);
	}
}

/* Animations */
.animate-blink {
	animation: blink 1s steps(2, start) infinite;
}
@keyframes blink {
	50% {
		opacity: 0;
	}
}
.view-enter {
	animation: fadeIn 0.4s ease forwards, slideUp 0.4s ease forwards;
}
.view-exit {
	animation: fadeOut 0.3s ease forwards, slideDown 0.3s ease forwards;
}
@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}
@keyframes fadeOut {
	from {
		opacity: 1;
	}
	to {
		opacity: 0;
	}
}
@keyframes slideUp {
	from {
		transform: translateY(1rem);
	}
	to {
		transform: translateY(0);
	}
}
@keyframes slideDown {
	from {
		transform: translateY(0);
	}
	to {
		transform: translateY(-0.5rem);
	}
}

/* Background pattern utils */
@layer utilities {
	.bg-dots {
		background-image: radial-gradient(rgba(0, 0, 0, 0.06) 1px, transparent 1px);
		background-size: 24px 24px;
	}
	.bg-asterisks {
		background: conic-gradient(
					from 45deg,
					rgba(0, 0, 0, 0.05) 0 1deg,
					transparent 1deg
				)
				0 0/30px 30px,
			linear-gradient(rgba(0, 0, 0, 0.05) 1px, transparent 1px) 0 0/30px 30px,
			linear-gradient(90deg, rgba(0, 0, 0, 0.05) 1px, transparent 1px) 0 0/30px
				30px;
	}
	.bg-lines {
		background-image: linear-gradient(rgba(0, 0, 0, 0.05) 1px, transparent 1px);
		background-size: 48px 48px;
	}
	.bg-plus {
		background: linear-gradient(rgba(0, 0, 0, 0.05) 1px, transparent 1px) 0 0/32px
				32px,
			linear-gradient(90deg, rgba(0, 0, 0, 0.05) 1px, transparent 1px) 0 0/32px
				32px;
	}
}

/* JSON bullet link styles */
.bullet-item {
	margin-bottom: 1rem;
}
.bullet-heading {
	margin: 0 0 0.25rem;
	font-size: 1.02rem;
	font-weight: 600;
	line-height: 1.2;
	color: #0f172a;
}
.bullet-body {
	margin: 0;
	color: #394149;
	font-size: 0.98rem;
	line-height: 1.5;
}
.bullet-body a {
	color: #1e3a8a;
	text-decoration: underline;
	text-underline-offset: 2px;
	font-weight: 600;
}
.bullet-body a:focus,
.bullet-body a:focus-visible {
	outline: 3px solid rgba(30, 58, 138, 0.15);
	box-shadow: 0 0 0 4px rgba(30, 58, 138, 0.12);
	border-radius: 4px;
}

/* Flip card utilities */
.flip3d-scene {
	perspective: 1000px;
}
.flip3d-flipper {
	position: relative;
	width: 100%;
	height: 100%;
	transform-style: preserve-3d;
	transition: transform 600ms cubic-bezier(0.2, 0.65, 0.3, 1);
}
.flip3d-flipper.is-flipped {
	transform: rotateY(180deg);
}
.flip3d-face {
	position: absolute;
	inset: 0;
	border-radius: 0.75rem;
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
}
.flip3d-back {
	transform: rotateY(180deg);
}

/* Reduced-motion fallback */
.no-3d .flip3d-flipper {
	transform: none !important;
}
.no-3d .flip3d-front {
	transition: opacity 0.25s ease;
}
.no-3d .flip3d-back {
	transition: opacity 0.25s ease, max-height 0.3s ease;
	overflow: hidden;
}
.no-3d .flip3d-front[aria-hidden="true"] {
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
}
.no-3d .flip3d-back[data-open="true"] {
	opacity: 1;
	visibility: visible;
	max-height: 999px;
}
.no-3d .flip3d-back[data-open="false"] {
	opacity: 0;
	visibility: hidden;
	max-height: 0;
}

/* Pointer affordance + backdrop fallback */
button,
[role="button"],
a {
	cursor: pointer;
}
@supports not (
	(backdrop-filter: blur(2px)) or (-webkit-backdrop-filter: blur(2px))
) {
	.no-backdrop-glass {
		background: rgba(255, 255, 255, 0.95) !important;
	}
}
@-moz-document url-prefix() {
	.no-backdrop-glass {
		backdrop-filter: none !important;
		-webkit-backdrop-filter: none !important;
		background-color: rgba(255, 255, 255, 0.92) !important;
	}
}
